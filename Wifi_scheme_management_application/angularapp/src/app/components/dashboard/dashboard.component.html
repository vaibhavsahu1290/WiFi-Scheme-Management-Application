
<app-adminnav></app-adminnav>
 
<div class="dashboard-container">
  <h2>WiZone Admin Dashboard</h2>
  <p class="tagline">Your gateway to seamless connectivity</p>
 
  <div class="stats">
    <div class="stat-card">
      <h3>Total Schemes</h3>
      <p>{{ totalSchemes }}</p>
    </div>
    <div class="stat-card">
      <h3>Available</h3>
      <p>{{ availableCount }}</p>
    </div>
    <div class="stat-card">
      <h3>Unavailable</h3>
      <p>{{ unavailableCount }}</p>
    </div>
 
    <div class="progress-circle">
      <svg viewBox="0 0 36 36" class="circular-chart">
        <path
          class="circle-bg"
          d="M18 2.0845
             a 15.9155 15.9155 0 0 1 0 31.831
             a 15.9155 15.9155 0 0 1 0 -31.831"
        />
        <path
          class="circle"
          [attr.stroke-dasharray]="availabilityPercentage + ', 100'"
          d="M18 2.0845
             a 15.9155 15.9155 0 0 1 0 31.831
             a 15.9155 15.9155 0 0 1 0 -31.831"
        />
        <text
          x="18"
          y="20.5"
          text-anchor="middle"
          alignment-baseline="middle"
          class="percentage"
        >
          {{ availabilityPercentage }}%
        </text>
      </svg>
    </div>
  </div>
 
  <button (click)="toggleAvailability()">
    {{ showAvailableOnly ? 'Show Unavailable Schemes' : 'Show Available Schemes' }}
  </button>
 
  <div class="region-section">
    <div
      class="region-card"
      *ngFor="let region of (regionWiseSchemes | keyvalue)"
    >
      <h3>{{ region.key }}</h3>
      <ul class="scheme-list">
        <ng-container *ngFor="let scheme of region.value">
        <li
          *ngIf="showAvailableOnly ? scheme.availabilityStatus === 'Available' : scheme.availabilityStatus === 'Unavailable'"
          [ngClass]="scheme.availabilityStatus === 'Available' ? 'available' : 'unavailable'">
          {{ scheme.schemeName }} ({{ scheme.availabilityStatus }})
        </li>
      </ng-container>
      </ul>
    </div>
  </div>
</div>